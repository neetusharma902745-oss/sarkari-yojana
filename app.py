import os
from flask import Flask, render_template, request, jsonify

app = Flask(__name__)

# Sarkari Yojana Data
yojanas = [
    {
        "id": 1,
        "name": "рдкреНрд░рдзрд╛рдирдордВрддреНрд░реА рдХрд┐рд╕рд╛рди рд╕рдореНрдорд╛рди рдирд┐рдзрд┐ (PM-KISAN)",
        "category": "рдХреГрд╖рд┐",
        "description": "рдХрд┐рд╕рд╛рдиреЛрдВ рдХреЛ рдкреНрд░рддрд┐рд╡рд░реНрд╖ тВ╣6,000 рдХреА рдЖрд░реНрдерд┐рдХ рд╕рд╣рд╛рдпрддрд╛ рддреАрди рдХрд┐рд╕реНрддреЛрдВ рдореЗрдВ рджреА рдЬрд╛рддреА рд╣реИред",
        "benefit": "тВ╣6,000 рдкреНрд░рддрд┐ рд╡рд░реНрд╖",
        "eligibility": "рд▓рдШреБ рдПрд╡рдВ рд╕реАрдорд╛рдВрдд рдХрд┐рд╕рд╛рди",
        "ministry": "рдХреГрд╖рд┐ рдПрд╡рдВ рдХрд┐рд╕рд╛рди рдХрд▓реНрдпрд╛рдг рдордВрддреНрд░рд╛рд▓рдп",
        "link": "https://pmkisan.gov.in",
        "icon": "ЁЯМ╛"
    },
    {
        "id": 2,
        "name": "рдкреНрд░рдзрд╛рдирдордВрддреНрд░реА рдЖрд╡рд╛рд╕ рдпреЛрдЬрдирд╛ (PMAY)",
        "category": "рдЖрд╡рд╛рд╕",
        "description": "рдЧрд░реАрдм рдкрд░рд┐рд╡рд╛рд░реЛрдВ рдХреЛ рдкрдХреНрдХрд╛ рдШрд░ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд╡рд┐рддреНрддреАрдп рд╕рд╣рд╛рдпрддрд╛ рдкреНрд░рджрд╛рди рдХреА рдЬрд╛рддреА рд╣реИред",
        "benefit": "тВ╣1.2 рд▓рд╛рдЦ - тВ╣2.5 рд▓рд╛рдЦ рддрдХ",
        "eligibility": "BPL рдкрд░рд┐рд╡рд╛рд░, EWS, LIG рд╢реНрд░реЗрдгреА",
        "ministry": "рдЖрд╡рд╛рд╕ рдПрд╡рдВ рд╢рд╣рд░реА рдХрд╛рд░реНрдп рдордВрддреНрд░рд╛рд▓рдп",
        "link": "https://pmaymis.gov.in",
        "icon": "ЁЯПа"
    },
    {
        "id": 3,
        "name": "рдЖрдпреБрд╖реНрдорд╛рди рднрд╛рд░рдд рдпреЛрдЬрдирд╛",
        "category": "рд╕реНрд╡рд╛рд╕реНрдереНрдп",
        "description": "рдЧрд░реАрдм рдкрд░рд┐рд╡рд╛рд░реЛрдВ рдХреЛ тВ╣5 рд▓рд╛рдЦ рддрдХ рдХрд╛ рдореБрдлреНрдд рд╕реНрд╡рд╛рд╕реНрдереНрдп рдмреАрдорд╛ рдкреНрд░рджрд╛рди рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред",
        "benefit": "тВ╣5 рд▓рд╛рдЦ рддрдХ рд╕реНрд╡рд╛рд╕реНрдереНрдп рдмреАрдорд╛",
        "eligibility": "SECC рдбреЗрдЯрд╛рдмреЗрд╕ рдореЗрдВ рд╢рд╛рдорд┐рд▓ рдкрд░рд┐рд╡рд╛рд░",
        "ministry": "рд╕реНрд╡рд╛рд╕реНрдереНрдп рдПрд╡рдВ рдкрд░рд┐рд╡рд╛рд░ рдХрд▓реНрдпрд╛рдг рдордВрддреНрд░рд╛рд▓рдп",
        "link": "https://pmjay.gov.in",
        "icon": "ЁЯПе"
    },
    {
        "id": 4,
        "name": "рдЙрдЬреНрдЬреНрд╡рд▓рд╛ рдпреЛрдЬрдирд╛ (PMUY)",
        "category": "рдорд╣рд┐рд▓рд╛",
        "description": "BPL рдкрд░рд┐рд╡рд╛рд░реЛрдВ рдХреА рдорд╣рд┐рд▓рд╛рдУрдВ рдХреЛ рдореБрдлреНрдд LPG рдЧреИрд╕ рдХрдиреЗрдХреНрд╢рди рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред",
        "benefit": "рдореБрдлреНрдд LPG рдХрдиреЗрдХреНрд╢рди + тВ╣1600 рд╕рд╣рд╛рдпрддрд╛",
        "eligibility": "BPL рдкрд░рд┐рд╡рд╛рд░ рдХреА рдорд╣рд┐рд▓рд╛рдПрдВ",
        "ministry": "рдкреЗрдЯреНрд░реЛрд▓рд┐рдпрдо рдПрд╡рдВ рдкреНрд░рд╛рдХреГрддрд┐рдХ рдЧреИрд╕ рдордВрддреНрд░рд╛рд▓рдп",
        "link": "https://pmuy.gov.in",
        "icon": "ЁЯФе"
    },
    {
        "id": 5,
        "name": "рдкреНрд░рдзрд╛рдирдордВрддреНрд░реА рдореБрджреНрд░рд╛ рдпреЛрдЬрдирд╛ (PMMY)",
        "category": "рд╡реНрдпрд╡рд╕рд╛рдп",
        "description": "рдЫреЛрдЯреЗ рд╡реНрдпрд╡рд╕рд╛рдпрд┐рдпреЛрдВ рдХреЛ рдмрд┐рдирд╛ рдЧрд╛рд░рдВрдЯреА рдХреЗ тВ╣10 рд▓рд╛рдЦ рддрдХ рдХрд╛ рдЛрдг рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред",
        "benefit": "тВ╣50,000 рд╕реЗ тВ╣10 рд▓рд╛рдЦ рддрдХ рдЛрдг",
        "eligibility": "рдЫреЛрдЯреЗ рд╡реНрдпрд╛рдкрд╛рд░реА, рдХрд╛рд░реАрдЧрд░, рджреБрдХрд╛рдирджрд╛рд░",
        "ministry": "рд╡рд┐рддреНрдд рдордВрддреНрд░рд╛рд▓рдп",
        "link": "https://mudra.org.in",
        "icon": "ЁЯТ╝"
    },
    {
        "id": 6,
        "name": "рд╕реБрдХрдиреНрдпрд╛ рд╕рдореГрджреНрдзрд┐ рдпреЛрдЬрдирд╛",
        "category": "рдорд╣рд┐рд▓рд╛",
        "description": "рдмреЗрдЯрд┐рдпреЛрдВ рдХреЗ рднрд╡рд┐рд╖реНрдп рдХреЗ рд▓рд┐рдП рдЙрдЪреНрдЪ рдмреНрдпрд╛рдЬ рджрд░ рдкрд░ рдмрдЪрдд рдЦрд╛рддрд╛ рдЦреЛрд▓рд╛ рдЬрд╛рддрд╛ рд╣реИред",
        "benefit": "8.2% рдмреНрдпрд╛рдЬ рджрд░ + рдЯреИрдХреНрд╕ рд▓рд╛рдн",
        "eligibility": "10 рд╡рд░реНрд╖ рд╕реЗ рдХрдо рдЖрдпреБ рдХреА рдмреЗрдЯрд┐рдпрд╛рдВ",
        "ministry": "рдорд╣рд┐рд▓рд╛ рдПрд╡рдВ рдмрд╛рд▓ рд╡рд┐рдХрд╛рд╕ рдордВрддреНрд░рд╛рд▓рдп",
        "link": "https://www.india.gov.in/sukanya-samriddhi-yojana",
        "icon": "ЁЯСз"
    },
    {
        "id": 7,
        "name": "рдордирд░реЗрдЧрд╛ (MGNREGA)",
        "category": "рд░реЛрдЬрдЧрд╛рд░",
        "description": "рдЧреНрд░рд╛рдореАрдг рдкрд░рд┐рд╡рд╛рд░реЛрдВ рдХреЛ 100 рджрд┐рди рдХрд╛ рдЧрд╛рд░рдВрдЯреАрдб рд░реЛрдЬрдЧрд╛рд░ рдкреНрд░рджрд╛рди рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред",
        "benefit": "100 рджрд┐рди рдЧрд╛рд░рдВрдЯреАрдб рд░реЛрдЬрдЧрд╛рд░",
        "eligibility": "рдЧреНрд░рд╛рдореАрдг рдХреНрд╖реЗрддреНрд░ рдХреЗ рд╡рдпрд╕реНрдХ рдирд╛рдЧрд░рд┐рдХ",
        "ministry": "рдЧреНрд░рд╛рдореАрдг рд╡рд┐рдХрд╛рд╕ рдордВрддреНрд░рд╛рд▓рдп",
        "link": "https://nrega.nic.in",
        "icon": "тЫПя╕П"
    },
    {
        "id": 8,
        "name": "рдкреНрд░рдзрд╛рдирдордВрддреНрд░реА рдЬрди рдзрди рдпреЛрдЬрдирд╛",
        "category": "рдмреИрдВрдХрд┐рдВрдЧ",
        "description": "рдЬреАрд░реЛ рдмреИрд▓реЗрдВрд╕ рдкрд░ рдмреИрдВрдХ рдЦрд╛рддрд╛, рдмреАрдорд╛ рдФрд░ рдУрд╡рд░рдбреНрд░рд╛рдлреНрдЯ рд╕реБрд╡рд┐рдзрд╛ рдорд┐рд▓рддреА рд╣реИред",
        "benefit": "тВ╣2 рд▓рд╛рдЦ рдмреАрдорд╛ + тВ╣10,000 рдУрд╡рд░рдбреНрд░рд╛рдлреНрдЯ",
        "eligibility": "рдмрд┐рдирд╛ рдмреИрдВрдХ рдЦрд╛рддреЗ рд╡рд╛рд▓реЗ рдирд╛рдЧрд░рд┐рдХ",
        "ministry": "рд╡рд┐рддреНрдд рдордВрддреНрд░рд╛рд▓рдп",
        "link": "https://pmjdy.gov.in",
        "icon": "ЁЯПж"
    },
    {
        "id": 9,
        "name": "рд╕реНрдХреЙрд▓рд░рд╢рд┐рдк рдпреЛрдЬрдирд╛рдПрдВ (NSP)",
        "category": "рд╢рд┐рдХреНрд╖рд╛",
        "description": "SC/ST/OBC рдФрд░ рдЕрд▓реНрдкрд╕рдВрдЦреНрдпрдХ рдЫрд╛рддреНрд░реЛрдВ рдХреЛ рдкрдврд╝рд╛рдИ рдХреЗ рд▓рд┐рдП рдЫрд╛рддреНрд░рд╡реГрддреНрддрд┐ рджреА рдЬрд╛рддреА рд╣реИред",
        "benefit": "тВ╣1,000 рд╕реЗ тВ╣25,000 рдкреНрд░рддрд┐ рд╡рд░реНрд╖",
        "eligibility": "SC/ST/OBC/рдЕрд▓реНрдкрд╕рдВрдЦреНрдпрдХ рдЫрд╛рддреНрд░",
        "ministry": "рд╕рд╛рдорд╛рдЬрд┐рдХ рдиреНрдпрд╛рдп рдордВрддреНрд░рд╛рд▓рдп",
        "link": "https://scholarships.gov.in",
        "icon": "ЁЯОУ"
    },
]

categories = list(set(y["category"] for y in yojanas))

@app.route('/')
def index():
    return render_template('index.html', yojanas=yojanas, categories=categories)

@app.route('/yojana/<int:yojana_id>')
def yojana_detail(yojana_id):
    yojana = next((y for y in yojanas if y["id"] == yojana_id), None)
    if not yojana:
        return "рдпреЛрдЬрдирд╛ рдирд╣реАрдВ рдорд┐рд▓реА", 404
    return render_template('detail.html', yojana=yojana)

@app.route('/search')
def search():
    query = request.args.get('q', '').lower()
    category = request.args.get('category', '')
    results = yojanas
    if query:
        results = [y for y in results if query in y['name'].lower() or query in y['description'].lower()]
    if category:
        results = [y for y in results if y['category'] == category]
    return render_template('index.html', yojanas=results, categories=categories, query=query, selected_category=category)

@app.route('/api/yojanas')
def api_yojanas():
    return jsonify(yojanas)

import os

# тЬЕ Render ke liye PORT environment variable use karo
if __name__ == '__main__':
    port = int(os.environ.get('PORT', 5000))
    app.run(host='0.0.0.0', port=port, debug=False)
